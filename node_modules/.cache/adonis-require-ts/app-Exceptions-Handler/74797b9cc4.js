"use strict";
var __importDefault = (this && this.__importDefault) || function (mod) {
    return (mod && mod.__esModule) ? mod : { "default": mod };
};
Object.defineProperty(exports, "__esModule", { value: true });
const Logger_1 = __importDefault(global[Symbol.for('ioc.use')]("Adonis/Core/Logger"));
const HttpExceptionHandler_1 = __importDefault(global[Symbol.for('ioc.use')]("Adonis/Core/HttpExceptionHandler"));
class ExceptionHandler extends HttpExceptionHandler_1.default {
    constructor() {
        super(Logger_1.default);
        this.statusPages = {
            '404': 'errors/not-found',
            '500..599': 'errors/server-error',
        };
    }
    async handle(error, ctx) {
        if (error.code === 'E_UNAUTHORIZED_ACCESS') {
            return ctx.response.status(422).send({ message: 'VocÃª precisa estar logado.' });
        }
        if (error.code === 'E_AUTHORIZATION_FAILURE') {
            return ctx.response.status(401).send({ message: 'Acesso negado.' });
        }
        return super.handle(error, ctx);
    }
}
exports.default = ExceptionHandler;
//# sourceMappingURL=data:application/json;base64,eyJ2ZXJzaW9uIjozLCJmaWxlIjoiSGFuZGxlci5qcyIsInNvdXJjZVJvb3QiOiIiLCJzb3VyY2VzIjpbIkhhbmRsZXIudHMiXSwibmFtZXMiOltdLCJtYXBwaW5ncyI6Ijs7Ozs7QUFlQSxzRkFBNEM7QUFFNUMsa0hBQXdFO0FBRXhFLE1BQXFCLGdCQUFpQixTQUFRLDhCQUFvQjtJQU1oRTtRQUNFLEtBQUssQ0FBQyxnQkFBTSxDQUFDLENBQUE7UUFOTCxnQkFBVyxHQUFHO1lBQ3RCLEtBQUssRUFBRSxrQkFBa0I7WUFDekIsVUFBVSxFQUFFLHFCQUFxQjtTQUNsQyxDQUFBO0lBSUQsQ0FBQztJQUNNLEtBQUssQ0FBQyxNQUFNLENBQUMsS0FBVSxFQUFFLEdBQXdCO1FBSXRELElBQUksS0FBSyxDQUFDLElBQUksS0FBSyx1QkFBdUIsRUFBRTtZQUMxQyxPQUFPLEdBQUcsQ0FBQyxRQUFRLENBQUMsTUFBTSxDQUFDLEdBQUcsQ0FBQyxDQUFDLElBQUksQ0FBQyxFQUFFLE9BQU8sRUFBRSw0QkFBNEIsRUFBRSxDQUFDLENBQUE7U0FDaEY7UUFFRCxJQUFJLEtBQUssQ0FBQyxJQUFJLEtBQUsseUJBQXlCLEVBQUU7WUFDNUMsT0FBTyxHQUFHLENBQUMsUUFBUSxDQUFDLE1BQU0sQ0FBQyxHQUFHLENBQUMsQ0FBQyxJQUFJLENBQUMsRUFBRSxPQUFPLEVBQUUsZ0JBQWdCLEVBQUUsQ0FBQyxDQUFBO1NBQ3BFO1FBS0QsT0FBTyxLQUFLLENBQUMsTUFBTSxDQUFDLEtBQUssRUFBRSxHQUFHLENBQUMsQ0FBQTtJQUNqQyxDQUFDO0NBQ0Y7QUExQkQsbUNBMEJDIiwic291cmNlc0NvbnRlbnQiOlsiLypcbnwtLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLVxufCBIdHRwIEV4Y2VwdGlvbiBIYW5kbGVyXG58LS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS1cbnxcbnwgQWRvbmlzSnMgd2lsbCBmb3J3YXJkIGFsbCBleGNlcHRpb25zIG9jY3VycmVkIGR1cmluZyBhbiBIVFRQIHJlcXVlc3QgdG9cbnwgdGhlIGZvbGxvd2luZyBjbGFzcy4gWW91IGNhbiBsZWFybiBtb3JlIGFib3V0IGV4Y2VwdGlvbiBoYW5kbGluZyBieVxufCByZWFkaW5nIGRvY3MuXG58XG58IFRoZSBleGNlcHRpb24gaGFuZGxlciBleHRlbmRzIGEgYmFzZSBgSHR0cEV4Y2VwdGlvbkhhbmRsZXJgIHdoaWNoIGlzIG5vdFxufCBtYW5kYXRvcnksIGhvd2V2ZXIgaXQgY2FuIGRvIGxvdCBvZiBoZWF2eSBsaWZ0aW5nIHRvIGhhbmRsZSB0aGUgZXJyb3JzXG58IHByb3Blcmx5LlxufFxuKi9cblxuaW1wb3J0IExvZ2dlciBmcm9tICdAaW9jOkFkb25pcy9Db3JlL0xvZ2dlcidcbmltcG9ydCB7IEh0dHBDb250ZXh0Q29udHJhY3QgfSBmcm9tICdAaW9jOkFkb25pcy9Db3JlL0h0dHBDb250ZXh0J1xuaW1wb3J0IEh0dHBFeGNlcHRpb25IYW5kbGVyIGZyb20gJ0Bpb2M6QWRvbmlzL0NvcmUvSHR0cEV4Y2VwdGlvbkhhbmRsZXInXG5cbmV4cG9ydCBkZWZhdWx0IGNsYXNzIEV4Y2VwdGlvbkhhbmRsZXIgZXh0ZW5kcyBIdHRwRXhjZXB0aW9uSGFuZGxlciB7XG4gIHByb3RlY3RlZCBzdGF0dXNQYWdlcyA9IHtcbiAgICAnNDA0JzogJ2Vycm9ycy9ub3QtZm91bmQnLFxuICAgICc1MDAuLjU5OSc6ICdlcnJvcnMvc2VydmVyLWVycm9yJyxcbiAgfVxuXG4gIGNvbnN0cnVjdG9yKCkge1xuICAgIHN1cGVyKExvZ2dlcilcbiAgfVxuICBwdWJsaWMgYXN5bmMgaGFuZGxlKGVycm9yOiBhbnksIGN0eDogSHR0cENvbnRleHRDb250cmFjdCkge1xuICAgIC8qKlxuICAgICAqIFNlbGYgaGFuZGxlIHRoZSB2YWxpZGF0aW9uIGV4Y2VwdGlvblxuICAgICAqL1xuICAgIGlmIChlcnJvci5jb2RlID09PSAnRV9VTkFVVEhPUklaRURfQUNDRVNTJykge1xuICAgICAgcmV0dXJuIGN0eC5yZXNwb25zZS5zdGF0dXMoNDIyKS5zZW5kKHsgbWVzc2FnZTogJ1ZvY8OqIHByZWNpc2EgZXN0YXIgbG9nYWRvLicgfSlcbiAgICB9XG5cbiAgICBpZiAoZXJyb3IuY29kZSA9PT0gJ0VfQVVUSE9SSVpBVElPTl9GQUlMVVJFJykge1xuICAgICAgcmV0dXJuIGN0eC5yZXNwb25zZS5zdGF0dXMoNDAxKS5zZW5kKHsgbWVzc2FnZTogJ0FjZXNzbyBuZWdhZG8uJyB9KVxuICAgIH1cblxuICAgIC8qKlxuICAgICAqIEZvcndhcmQgcmVzdCBvZiB0aGUgZXhjZXB0aW9ucyB0byB0aGUgcGFyZW50IGNsYXNzXG4gICAgICovXG4gICAgcmV0dXJuIHN1cGVyLmhhbmRsZShlcnJvciwgY3R4KVxuICB9XG59XG4iXX0=